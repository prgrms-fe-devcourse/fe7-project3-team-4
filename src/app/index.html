<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>ì»¤ë®¤ë‹ˆí‹° ìƒì </title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      /* ===== ê¸°ë³¸ ë¦¬ì…‹ ===== */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      :root {
        --primary: #6758ff;
        --primary-soft: rgba(103, 88, 255, 0.16);
        --bg-gradient: linear-gradient(130deg, #eff5fe 18.41%, #fbf3fb 81.59%);
        --glass-bg: rgba(255, 255, 255, 0.7);
        --glass-border: rgba(255, 255, 255, 0.8);
        --glass-shadow: 0 18px 45px rgba(31, 41, 55, 0.12);
        --text-main: #1f2933;
        --text-sub: #6b7280;
        --coin: #fbbf24;
        --danger: #f97373;
      }

      html,
      body {
        height: 100%;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
          sans-serif;
        color: var(--text-main);
      }

      body {
        background: var(--bg-gradient);
        display: flex;
        justify-content: center;
        padding: 24px;
      }

      /* ===== ì „ì²´ ë ˆì´ì•„ì›ƒ ===== */
      .app {
        position: relative;
        max-width: 1200px;
        width: 100%;
        min-height: calc(100vh - 48px);
        border-radius: 28px;
        padding: 20px 22px 24px;
        background: radial-gradient(
            circle at 0% 0%,
            rgba(255, 255, 255, 0.8),
            transparent 50%
          ),
          radial-gradient(
            circle at 100% 100%,
            rgba(255, 255, 255, 0.7),
            transparent 55%
          );
        overflow: hidden;
      }

      /* ê°€ë²¼ìš´ ë…¸ì´ì¦ˆ ëŠë‚Œ (CSS-only) */
      .noise {
        pointer-events: none;
        position: absolute;
        inset: 0;
        opacity: 0.05;
        mix-blend-mode: soft-light;
        background-image: repeating-linear-gradient(
            0deg,
            rgba(255, 255, 255, 0.5) 0px,
            rgba(255, 255, 255, 0.5) 1px,
            transparent 1px,
            transparent 2px
          ),
          repeating-linear-gradient(
            90deg,
            rgba(255, 255, 255, 0.4) 0px,
            rgba(255, 255, 255, 0.4) 1px,
            transparent 1px,
            transparent 2px
          );
        z-index: 0;
      }

      .app-inner {
        position: relative;
        z-index: 1;
        display: flex;
        flex-direction: column;
        gap: 18px;
        height: 100%;
      }

      /* ===== í—¤ë” ===== */
      .header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
      }

      .logo-group {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .logo-mark {
        width: 40px;
        height: 40px;
        border-radius: 16px;
        background: radial-gradient(
            circle at 0% 0%,
            rgba(255, 255, 255, 0.9),
            transparent 60%
          ),
          radial-gradient(circle at 100% 100%, #6758ff, #ea489a);
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 12px 30px rgba(103, 88, 255, 0.35);
        position: relative;
        overflow: hidden;
      }

      .logo-mark::before {
        content: "";
        position: absolute;
        width: 60%;
        height: 60%;
        border-radius: 999px;
        border: 2px solid rgba(255, 255, 255, 0.9);
        transform: rotate(-18deg);
      }

      .logo-text-main {
        font-weight: 700;
        font-size: 20px;
        letter-spacing: 0.04em;
      }

      .logo-text-sub {
        font-size: 12px;
        color: var(--text-sub);
      }

      .header-right {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .pill {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 8px 14px;
        border-radius: 999px;
        background: rgba(255, 255, 255, 0.9);
        border: 1px solid rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(10px);
        font-size: 13px;
        box-shadow: 0 10px 30px rgba(148, 163, 184, 0.35);
      }

      .coin-icon {
        width: 18px;
        height: 18px;
        border-radius: 999px;
        background: radial-gradient(circle at 30% 20%, #fef9c3, #facc15);
        border: 2px solid #fef3c7;
        box-shadow: 0 4px 10px rgba(250, 204, 21, 0.5);
        display: inline-flex;
        align-items: center;
        justify-content: center;
        font-size: 11px;
      }

      .btn-outline {
        padding: 8px 14px;
        border-radius: 999px;
        border: 1px solid rgba(148, 163, 184, 0.5);
        background: rgba(255, 255, 255, 0.7);
        font-size: 13px;
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        gap: 6px;
        transition: all 0.15s ease-out;
      }

      .btn-outline:hover {
        border-color: rgba(103, 88, 255, 0.7);
        background: rgba(255, 255, 255, 0.9);
        transform: translateY(-1px);
      }

      /* ===== ì„œë¸Œí—¤ë” ===== */
      .sub-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 16px;
        flex-wrap: wrap;
      }

      .headline {
        display: flex;
        flex-direction: column;
        gap: 4px;
      }

      .headline h2 {
        font-size: 18px;
        font-weight: 600;
      }

      .headline p {
        font-size: 13px;
        color: var(--text-sub);
      }

      .filters {
        display: flex;
        align-items: center;
        gap: 8px;
        flex-wrap: wrap;
      }

      .filter-chip {
        padding: 6px 12px;
        border-radius: 999px;
        border: 1px solid transparent;
        font-size: 13px;
        cursor: pointer;
        background: rgba(255, 255, 255, 0.7);
        color: var(--text-sub);
        backdrop-filter: blur(12px);
        transition: all 0.12s ease-out;
      }

      .filter-chip span {
        font-size: 11px;
        padding: 2px 6px;
        border-radius: 999px;
        background: rgba(148, 163, 184, 0.18);
        margin-left: 4px;
      }

      .filter-chip.active {
        background: radial-gradient(circle at 0% 0%, #8b5cf6, #6758ff);
        color: white;
        border-color: rgba(129, 140, 248, 0.7);
        box-shadow: 0 10px 25px rgba(79, 70, 229, 0.45);
      }

      .filter-chip.active span {
        background: rgba(255, 255, 255, 0.26);
      }

      /* ===== ë©”ì¸ ì˜ì—­ ===== */
      .main {
        display: grid;
        grid-template-columns: minmax(0, 2.2fr) minmax(260px, 0.95fr);
        gap: 16px;
        margin-top: 4px;
        height: 100%;
        min-height: 400px;
      }

      .panel {
        background: var(--glass-bg);
        border-radius: 22px;
        border: 1px solid var(--glass-border);
        box-shadow: var(--glass-shadow);
        backdrop-filter: blur(18px);
        padding: 14px 14px 16px;
        display: flex;
        flex-direction: column;
        min-height: 260px;
      }

      .panel-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 10px;
      }

      .panel-title {
        font-size: 14px;
        font-weight: 600;
      }

      .panel-sub {
        font-size: 12px;
        color: var(--text-sub);
      }

      /* ===== ìƒí’ˆ ê·¸ë¦¬ë“œ ===== */
      .product-grid {
        display: grid;
        grid-template-columns: repeat(3, minmax(0, 1fr));
        gap: 12px;
        margin-top: 4px;
        overflow: auto;
        padding-right: 4px;
      }

      .product-card {
        position: relative;
        border-radius: 18px;
        padding: 12px;
        background: linear-gradient(
            135deg,
            rgba(255, 255, 255, 0.92),
            rgba(248, 250, 252, 0.86)
          ),
          radial-gradient(
            circle at 0% 0%,
            rgba(103, 88, 255, 0.12),
            transparent 60%
          );
        border: 1px solid rgba(255, 255, 255, 0.85);
        box-shadow: 0 14px 30px rgba(148, 163, 184, 0.35);
        backdrop-filter: blur(14px);
        display: flex;
        flex-direction: column;
        gap: 8px;
        transition: transform 0.15s ease-out, box-shadow 0.15s ease-out,
          border-color 0.15s ease-out;
        cursor: pointer;
      }

      .product-card:hover {
        transform: translateY(-4px) scale(1.01);
        box-shadow: 0 18px 40px rgba(148, 163, 184, 0.45);
        border-color: rgba(129, 140, 248, 0.8);
      }

      .product-badge-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 6px;
      }

      .tag {
        font-size: 11px;
        padding: 3px 7px;
        border-radius: 999px;
        background: rgba(15, 23, 42, 0.06);
      }

      .tag-primary {
        background: rgba(103, 88, 255, 0.11);
        color: #4c38ff;
      }

      .tag-warning {
        background: rgba(248, 180, 0, 0.12);
        color: #92400e;
      }

      .tag-danger {
        background: rgba(248, 113, 113, 0.12);
        color: #b91c1c;
      }

      .product-main {
        display: flex;
        gap: 8px;
        align-items: center;
      }

      .product-icon {
        width: 44px;
        height: 44px;
        border-radius: 16px;
        background: radial-gradient(
            circle at 30% 0%,
            rgba(255, 255, 255, 0.95),
            transparent 55%
          ),
          radial-gradient(circle at 100% 100%, #8b5cf6, #6758ff);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 22px;
      }

      .product-texts {
        flex: 1;
        min-width: 0;
      }

      .product-name {
        font-size: 13px;
        font-weight: 600;
        margin-bottom: 2px;
      }

      .product-desc {
        font-size: 11px;
        color: var(--text-sub);
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .product-footer {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 8px;
        margin-top: 4px;
      }

      .price {
        display: flex;
        align-items: center;
        gap: 6px;
        font-size: 12px;
      }

      .price strong {
        font-size: 14px;
      }

      .btn-buy {
        border-radius: 999px;
        border: none;
        font-size: 12px;
        padding: 6px 10px;
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        gap: 4px;
        background: radial-gradient(circle at 0% 0%, #818cf8, #4f46e5);
        color: white;
        box-shadow: 0 10px 22px rgba(79, 70, 229, 0.55);
        transition: transform 0.1s ease-out, box-shadow 0.1s ease-out;
      }

      .btn-buy span {
        font-size: 13px;
      }

      .btn-buy:hover {
        transform: translateY(-1px);
        box-shadow: 0 12px 28px rgba(79, 70, 229, 0.7);
      }

      .btn-buy:active {
        transform: translateY(0);
        box-shadow: 0 8px 20px rgba(79, 70, 229, 0.55);
      }

      .btn-buy[disabled] {
        opacity: 0.7;
        box-shadow: none;
        cursor: default;
      }

      .owned-badge {
        font-size: 11px;
        padding: 3px 8px;
        border-radius: 999px;
        background: rgba(22, 163, 74, 0.08);
        color: #15803d;
        border: 1px solid rgba(34, 197, 94, 0.35);
      }

      /* ===== ì˜¤ë¥¸ìª½ íŒ¨ë„ (ì¥ë°”êµ¬ë‹ˆ/ìš”ì•½) ===== */
      .summary-body {
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .summary-section {
        padding: 8px 10px;
        border-radius: 14px;
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.98),
          rgba(248, 250, 252, 0.96)
        );
        border: 1px solid rgba(255, 255, 255, 0.92);
      }

      .summary-section + .summary-section {
        margin-top: 4px;
      }

      .summary-row {
        display: flex;
        align-items: center;
        justify-content: space-between;
        font-size: 13px;
        margin-bottom: 4px;
      }

      .summary-row span.label {
        color: var(--text-sub);
        font-size: 12px;
      }

      .summary-row strong {
        font-size: 14px;
      }

      .summary-row .small {
        font-size: 11px;
        color: var(--text-sub);
      }

      .divider {
        height: 1px;
        border-radius: 999px;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(148, 163, 184, 0.55),
          transparent
        );
        margin: 6px 0;
      }

      .cart-items {
        max-height: 160px;
        overflow: auto;
        padding-right: 4px;
        margin-top: 4px;
      }

      .cart-empty {
        font-size: 12px;
        color: var(--text-sub);
        text-align: center;
        padding: 10px 0 4px;
      }

      .cart-item {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 8px;
        font-size: 12px;
        padding: 6px 0;
      }

      .cart-item-left {
        display: flex;
        flex-direction: column;
        gap: 2px;
      }

      .cart-name {
        font-weight: 500;
      }

      .cart-meta {
        font-size: 11px;
        color: var(--text-sub);
      }

      .cart-item-right {
        display: flex;
        align-items: center;
        gap: 4px;
      }

      .cart-qty {
        font-size: 11px;
        padding: 2px 6px;
        border-radius: 999px;
        background: rgba(148, 163, 184, 0.18);
      }

      .btn-ghost {
        border: none;
        background: transparent;
        cursor: pointer;
        font-size: 14px;
        line-height: 1;
        padding: 2px 5px;
        color: #9ca3af;
      }

      .btn-ghost:hover {
        color: #6b7280;
      }

      .summary-footer {
        margin-top: 8px;
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .btn-main {
        width: 100%;
        border-radius: 999px;
        padding: 9px 10px;
        border: none;
        cursor: pointer;
        font-size: 14px;
        font-weight: 600;
        background: radial-gradient(circle at 0% 0%, #a855f7, #6758ff);
        color: white;
        box-shadow: 0 16px 36px rgba(99, 102, 241, 0.7);
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        transition: transform 0.12s ease-out, box-shadow 0.12s ease-out;
      }

      .btn-main:hover {
        transform: translateY(-1px);
        box-shadow: 0 18px 40px rgba(99, 102, 241, 0.85);
      }

      .btn-main:active {
        transform: translateY(0);
        box-shadow: 0 12px 30px rgba(99, 102, 241, 0.7);
      }

      .btn-main[disabled] {
        opacity: 0.7;
        box-shadow: none;
        cursor: default;
      }

      .summary-hint {
        font-size: 11px;
        color: var(--text-sub);
        text-align: center;
      }

      .summary-hint span {
        color: var(--primary);
        font-weight: 500;
      }

      /* Toast */
      .toast {
        position: fixed;
        left: 50%;
        bottom: 32px;
        transform: translateX(-50%);
        padding: 10px 16px;
        border-radius: 999px;
        background: rgba(15, 23, 42, 0.92);
        color: white;
        font-size: 13px;
        display: inline-flex;
        align-items: center;
        gap: 8px;
        box-shadow: 0 12px 30px rgba(15, 23, 42, 0.6);
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.18s ease-out, transform 0.18s ease-out;
        z-index: 50;
      }

      .toast.show {
        opacity: 1;
        transform: translate(-50%, -4px);
        pointer-events: auto;
      }

      .toast-dot {
        width: 10px;
        height: 10px;
        border-radius: 999px;
        background: radial-gradient(circle at 30% 0%, #bbf7d0, #22c55e);
      }

      /* ===== ë°˜ì‘í˜• ===== */
      @media (max-width: 960px) {
        body {
          padding: 14px;
        }

        .app {
          padding: 16px 16px 20px;
          border-radius: 22px;
        }

        .main {
          grid-template-columns: minmax(0, 1.6fr) minmax(0, 1.2fr);
        }

        .product-grid {
          grid-template-columns: repeat(2, minmax(0, 1fr));
        }
      }

      @media (max-width: 768px) {
        .main {
          grid-template-columns: minmax(0, 1fr);
          height: auto;
        }

        .product-grid {
          max-height: 360px;
        }

        .summary-body {
          max-height: none;
        }

        .header-right {
          flex-wrap: wrap;
          justify-content: flex-end;
        }

        .app {
          min-height: calc(100vh - 28px);
        }
      }

      @media (max-width: 520px) {
        body {
          padding: 12px;
        }

        .app {
          padding: 14px 12px 18px;
        }

        .logo-text-main {
          font-size: 18px;
        }

        .sub-header {
          align-items: flex-start;
        }

        .product-grid {
          grid-template-columns: minmax(0, 1fr);
        }
      }
    </style>
  </head>
  <body>
    <div class="app">
      <div class="noise"></div>
      <div class="app-inner">
        <!-- í—¤ë” -->
        <header class="header">
          <div class="logo-group">
            <div class="logo-mark"></div>
            <div>
              <div class="logo-text-main">Community Shop</div>
              <div class="logo-text-sub">
                í”„ë¡œí•„ ê¾¸ë¯¸ê¸° &nbsp;Â·&nbsp; í•œì • ë°°ì§€ ëª¨ìŒ
              </div>
            </div>
          </div>
          <div class="header-right">
            <div class="pill">
              <div class="coin-icon">â˜…</div>
              <span>ë‚´ ì½”ì¸</span>
              <strong id="coin-balance">1,250</strong>
            </div>
            <button class="btn-outline" type="button">
              <span>ì´ë²¤íŠ¸ ìƒì </span> <span>â€º</span>
            </button>
          </div>
        </header>

        <!-- ì„œë¸Œ í—¤ë” -->
        <section class="sub-header">
          <div class="headline">
            <h2>ì˜¤ëŠ˜ì˜ ì¶”ì²œ ì•„ì´í…œ</h2>
            <p>
              ì»¤ë®¤ë‹ˆí‹° í™œë™ìœ¼ë¡œ ëª¨ì€ ì½”ì¸ìœ¼ë¡œ í”„ë¡œí•„ì„ ë” íŠ¹ë³„í•˜ê²Œ ë§Œë“¤ì–´ë³´ì„¸ìš”.
            </p>
          </div>
          <div class="filters">
            <button class="filter-chip active" data-filter="all">
              ì „ì²´<span id="filter-count-all">0</span>
            </button>
            <button class="filter-chip" data-filter="avatar">
              ì•„ë°”íƒ€<span id="filter-count-avatar">0</span>
            </button>
            <button class="filter-chip" data-filter="badge">
              ë°°ì§€<span id="filter-count-badge">0</span>
            </button>
            <button class="filter-chip" data-filter="theme">
              ë‹‰ë„¤ì„ í…Œë§ˆ<span id="filter-count-theme">0</span>
            </button>
            <button class="filter-chip" data-filter="effect">
              ì±„íŒ… ì´í™íŠ¸<span id="filter-count-effect">0</span>
            </button>
          </div>
        </section>

        <!-- ë©”ì¸ -->
        <main class="main">
          <!-- ìƒí’ˆ ë¦¬ìŠ¤íŠ¸ -->
          <section class="panel">
            <div class="panel-header">
              <div>
                <div class="panel-title">ìƒì  ì•„ì´í…œ</div>
                <div class="panel-sub">
                  ì¸ê¸°ìˆœ Â· í•œì •íŒ Â· ì»¤ë®¤ë‹ˆí‹° ì „ìš© ì•„ì´í…œë§Œ ëª¨ì•˜ì–´ìš”.
                </div>
              </div>
            </div>
            <div class="product-grid" id="product-grid"></div>
          </section>

          <!-- ìš”ì•½ / ì¥ë°”êµ¬ë‹ˆ -->
          <aside class="panel">
            <div class="panel-header">
              <div>
                <div class="panel-title">ì¥ë°”êµ¬ë‹ˆ & ìš”ì•½</div>
                <div class="panel-sub">
                  ì•„ì´í…œì„ í´ë¦­í•˜ë©´ ì¥ë°”êµ¬ë‹ˆì— ë‹´ê²¨ìš”. í•œ ë²ˆì— ê²°ì œí•´ ë³´ì„¸ìš”.
                </div>
              </div>
            </div>
            <div class="summary-body">
              <div class="summary-section">
                <div class="summary-row">
                  <span class="label">í˜„ì¬ ë³´ìœ  ì½”ì¸</span>
                  <div class="price">
                    <div class="coin-icon"></div>
                    <strong id="summary-coin">1,250</strong>
                  </div>
                </div>
                <div class="divider"></div>
                <div class="summary-row">
                  <span class="label">ì„ íƒí•œ ì•„ì´í…œ</span>
                  <span><strong id="summary-count">0</strong> ê°œ</span>
                </div>
                <div class="summary-row">
                  <span class="label">ì˜ˆìƒ ì‚¬ìš© ì½”ì¸</span>
                  <div class="price">
                    <div class="coin-icon"></div>
                    <strong id="summary-total">0</strong>
                  </div>
                </div>
                <div class="summary-row">
                  <span class="label">êµ¬ë§¤ í›„ ì˜ˆìƒ ì”ì•¡</span>
                  <div class="price">
                    <div class="coin-icon"></div>
                    <strong id="summary-after">1,250</strong>
                  </div>
                </div>
              </div>

              <div class="summary-section">
                <div class="summary-row">
                  <span class="label">ì¥ë°”êµ¬ë‹ˆ</span>
                  <span class="small">í´ë¦­ í•œ ë²ˆìœ¼ë¡œ ìˆ˜ëŸ‰ ì¡°ì ˆ</span>
                </div>
                <div class="cart-items" id="cart-items">
                  <div class="cart-empty">ë‹´ê¸´ ì•„ì´í…œì´ ì—†ìŠµë‹ˆë‹¤.</div>
                </div>
              </div>

              <div class="summary-footer">
                <button class="btn-main" id="btn-purchase" disabled>
                  <span>ì„ íƒí•œ ì•„ì´í…œ êµ¬ë§¤í•˜ê¸°</span>
                  <span>â€º</span>
                </button>
                <p class="summary-hint">
                  <span>TIP.</span> ì˜¤ëŠ˜ ì²« êµ¬ë§¤ ì‹œ, ì‚¬ìš© ì½”ì¸ì˜ 5%ë¥¼ ë³´ë„ˆìŠ¤ë¡œ
                  ëŒë ¤ë“œë ¤ìš”.
                </p>
              </div>
            </div>
          </aside>
        </main>
      </div>
    </div>

    <!-- Toast -->
    <div class="toast" id="toast">
      <div class="toast-dot"></div>
      <span id="toast-message">ì•„ì´í…œì´ ì¥ë°”êµ¬ë‹ˆì— ë‹´ê²¼ì–´ìš”.</span>
    </div>

    <script>
      // ===== ë”ë¯¸ ë°ì´í„° =====
      const INITIAL_COIN = 1250;

      const products = [
        {
          id: "avatar_01",
          name: "ë„¤ì˜¨ ì½”ì–´ ì•„ë°”íƒ€",
          description: "ë³´ë¼ë¹› ë„¤ì˜¨ ë¼ì¸ì„ ë‘ë¥¸ 3D ìŠ¤íƒ€ì¼ í”„ë¡œí•„ ì•„ë°”íƒ€",
          category: "avatar",
          price: 320,
          icon: "ğŸ§¬",
          tags: ["ì¸ê¸°", "ì¶”ì²œ"],
          popular: true,
          limited: false,
          owned: false,
        },
        {
          id: "avatar_02",
          name: "ê¸€ë˜ìŠ¤ ìŠ¤í˜ì´ìŠ¤ ì•„ë°”íƒ€",
          description: "ë°˜íˆ¬ëª… ìœ ë¦¬ í—¬ë©§ ì† ì‘ì€ ìš°ì£¼",
          category: "avatar",
          price: 280,
          icon: "ğŸ‘©â€ğŸš€",
          tags: ["ì‹ ê·œ"],
          popular: false,
          limited: true,
          owned: false,
        },
        {
          id: "badge_01",
          name: "Early Bird ë°°ì§€",
          description: "ì¶œì„ë¥  ìƒìœ„ 5% ìœ ì €ì—ê²Œ ì–´ìš¸ë¦¬ëŠ” ìƒˆë²½í˜• ë°°ì§€",
          category: "badge",
          price: 180,
          icon: "ğŸŒ…",
          tags: ["ì¶œì„", "ë ˆê±°ì‹œ"],
          popular: true,
          limited: true,
          owned: true,
        },
        {
          id: "badge_02",
          name: "Prompt Master ë°°ì§€",
          description: "í”„ë¡¬í”„íŠ¸ ê²Œì‹œê¸€ 10ê°œ ì´ìƒ ì‘ì„±ììš© ë°°ì§€",
          category: "badge",
          price: 210,
          icon: "âœ¨",
          tags: ["í”„ë¦¬ë¯¸ì—„"],
          popular: true,
          limited: false,
          owned: false,
        },
        {
          id: "theme_01",
          name: "ë³´ëë¹› ê¸€ë˜ìŠ¤ ë‹‰ë„¤ì„",
          description: "ì±„íŒ…ë°©ì—ì„œ ë‹‰ë„¤ì„ ë’¤ì— ì€ì€í•œ ê¸€ë˜ìŠ¤ íƒœê·¸ í‘œì‹œ",
          category: "theme",
          price: 260,
          icon: "ğŸ’",
          tags: ["ë‹‰ë„¤ì„í…Œë§ˆ"],
          popular: false,
          limited: false,
          owned: false,
        },
        {
          id: "theme_02",
          name: "ëª¨ë…¸ ìŠ¤í˜ì´ìŠ¤ ë‹‰ë„¤ì„",
          description: "ê°œë°œì ê°ì„±ì˜ ëª¨ë…¸ìŠ¤í˜ì´ìŠ¤ í°íŠ¸ í…Œë§ˆ",
          category: "theme",
          price: 190,
          icon: "ğŸ§‘â€ğŸ’»",
          tags: [],
          popular: false,
          limited: false,
          owned: false,
        },
        {
          id: "effect_01",
          name: "ì±— ë²„ë¸” íŒŒí‹°í´",
          description: "ì²« ë©”ì‹œì§€ì—ë§Œ ì‚´ì§ íŠ€ëŠ” íŒŒí‹°í´ ì´í™íŠ¸",
          category: "effect",
          price: 230,
          icon: "ğŸ’¬",
          tags: ["ì±„íŒ…"],
          popular: true,
          limited: true,
          owned: false,
        },
        {
          id: "effect_02",
          name: "í•˜ì´ë¼ì´íŠ¸ ë©”ì‹œì§€ í…Œë‘ë¦¬",
          description: "ì¢‹ì•„ìš” ë§ì´ ë°›ì€ ë©”ì‹œì§€ì—ë§Œ ì–‡ì€ ë„¤ì˜¨ í…Œë‘ë¦¬",
          category: "effect",
          price: 210,
          icon: "ğŸ“Œ",
          tags: [],
          popular: false,
          limited: false,
          owned: false,
        },
        {
          id: "badge_03",
          name: "Weekly Top Writer",
          description: "ì£¼ê°„ ì¸ê¸° ê²Œì‹œê¸€ TOP 3 ì „ìš© í•œì • ë°°ì§€",
          category: "badge",
          price: 340,
          icon: "ğŸ†",
          tags: ["í•œì •", "ì£¼ê°„"],
          popular: true,
          limited: true,
          owned: false,
        },
      ];

      const productGrid = document.getElementById("product-grid");
      const filterChips = document.querySelectorAll(".filter-chip");
      const cartItemsEl = document.getElementById("cart-items");
      const btnPurchase = document.getElementById("btn-purchase");

      const coinBalanceEl = document.getElementById("coin-balance");
      const summaryCoinEl = document.getElementById("summary-coin");
      const summaryCountEl = document.getElementById("summary-count");
      const summaryTotalEl = document.getElementById("summary-total");
      const summaryAfterEl = document.getElementById("summary-after");

      const filterCountAll = document.getElementById("filter-count-all");
      const filterCountAvatar = document.getElementById("filter-count-avatar");
      const filterCountBadge = document.getElementById("filter-count-badge");
      const filterCountTheme = document.getElementById("filter-count-theme");
      const filterCountEffect = document.getElementById("filter-count-effect");

      const toastEl = document.getElementById("toast");
      const toastMessageEl = document.getElementById("toast-message");

      let currentFilter = "all";
      let coin = INITIAL_COIN;
      const cart = new Map(); // id -> {product, qty}

      function updateFilterCounts() {
        const counts = {
          all: products.length,
          avatar: 0,
          badge: 0,
          theme: 0,
          effect: 0,
        };
        products.forEach((p) => {
          counts[p.category]++;
        });
        filterCountAll.textContent = counts.all;
        filterCountAvatar.textContent = counts.avatar;
        filterCountBadge.textContent = counts.badge;
        filterCountTheme.textContent = counts.theme;
        filterCountEffect.textContent = counts.effect;
      }

      function renderProducts() {
        productGrid.innerHTML = "";
        const list =
          currentFilter === "all"
            ? products
            : products.filter((p) => p.category === currentFilter);

        list.forEach((product) => {
          const card = document.createElement("article");
          card.className = "product-card";

          const badgeRow = document.createElement("div");
          badgeRow.className = "product-badge-row";

          const leftTags = document.createElement("div");

          if (product.popular) {
            const tagPopular = document.createElement("span");
            tagPopular.className = "tag tag-primary";
            tagPopular.textContent = "ì¸ê¸°";
            leftTags.appendChild(tagPopular);
          }
          if (product.limited) {
            const tagLimited = document.createElement("span");
            tagLimited.className = "tag tag-warning";
            tagLimited.textContent = "í•œì •";
            leftTags.appendChild(tagLimited);
          }
          if (!product.popular && !product.limited && product.tags.length) {
            const tagCustom = document.createElement("span");
            tagCustom.className = "tag";
            tagCustom.textContent = product.tags[0];
            leftTags.appendChild(tagCustom);
          }

          badgeRow.appendChild(leftTags);

          if (product.owned) {
            const owned = document.createElement("span");
            owned.className = "owned-badge";
            owned.textContent = "ë³´ìœ ì¤‘";
            badgeRow.appendChild(owned);
          } else {
            const cat = document.createElement("span");
            cat.className = "tag";
            cat.textContent =
              product.category === "avatar"
                ? "ì•„ë°”íƒ€"
                : product.category === "badge"
                ? "ë°°ì§€"
                : product.category === "theme"
                ? "ë‹‰ë„¤ì„"
                : "ì±„íŒ…";
            badgeRow.appendChild(cat);
          }

          const productMain = document.createElement("div");
          productMain.className = "product-main";

          const icon = document.createElement("div");
          icon.className = "product-icon";
          icon.textContent = product.icon;

          const texts = document.createElement("div");
          texts.className = "product-texts";

          const name = document.createElement("div");
          name.className = "product-name";
          name.textContent = product.name;

          const desc = document.createElement("div");
          desc.className = "product-desc";
          desc.textContent = product.description;

          texts.appendChild(name);
          texts.appendChild(desc);

          productMain.appendChild(icon);
          productMain.appendChild(texts);

          const footer = document.createElement("div");
          footer.className = "product-footer";

          const price = document.createElement("div");
          price.className = "price";
          const coinIcon = document.createElement("div");
          coinIcon.className = "coin-icon";
          price.appendChild(coinIcon);

          const priceText = document.createElement("div");
          const strong = document.createElement("strong");
          strong.textContent = product.price.toString();
          priceText.appendChild(strong);
          footer.appendChild(price);

          price.appendChild(priceText);

          const btn = document.createElement("button");
          btn.type = "button";
          btn.className = "btn-buy";
          btn.innerHTML = `<span>ë‹´ê¸°</span>`;
          if (product.owned) {
            btn.disabled = true;
            btn.innerHTML = `<span>ì´ë¯¸ ë³´ìœ </span>`;
          }

          btn.addEventListener("click", (e) => {
            e.stopPropagation();
            addToCart(product);
          });

          footer.appendChild(btn);

          card.appendChild(badgeRow);
          card.appendChild(productMain);
          card.appendChild(footer);

          // ì¹´ë“œ ì „ì²´ í´ë¦­ë„ ë‹´ê¸°
          card.addEventListener("click", () => {
            if (!product.owned) addToCart(product);
          });

          productGrid.appendChild(card);
        });
      }

      function renderCart() {
        cartItemsEl.innerHTML = "";
        if (cart.size === 0) {
          const empty = document.createElement("div");
          empty.className = "cart-empty";
          empty.textContent = "ë‹´ê¸´ ì•„ì´í…œì´ ì—†ìŠµë‹ˆë‹¤.";
          cartItemsEl.appendChild(empty);
          return;
        }

        cart.forEach((entry, id) => {
          const { product, qty } = entry;
          const row = document.createElement("div");
          row.className = "cart-item";

          const left = document.createElement("div");
          left.className = "cart-item-left";
          const name = document.createElement("div");
          name.className = "cart-name";
          name.textContent = product.name;

          const meta = document.createElement("div");
          meta.className = "cart-meta";
          meta.textContent = `${product.price.toLocaleString()} ì½”ì¸`;

          left.appendChild(name);
          left.appendChild(meta);

          const right = document.createElement("div");
          right.className = "cart-item-right";

          const qtyBadge = document.createElement("span");
          qtyBadge.className = "cart-qty";
          qtyBadge.textContent = `x${qty}`;

          const btnMinus = document.createElement("button");
          btnMinus.className = "btn-ghost";
          btnMinus.type = "button";
          btnMinus.textContent = "âˆ’";
          btnMinus.addEventListener("click", () => changeQty(product, -1));

          const btnPlus = document.createElement("button");
          btnPlus.className = "btn-ghost";
          btnPlus.type = "button";
          btnPlus.textContent = "+";
          btnPlus.addEventListener("click", () => changeQty(product, +1));

          right.appendChild(btnMinus);
          right.appendChild(qtyBadge);
          right.appendChild(btnPlus);

          row.appendChild(left);
          row.appendChild(right);

          cartItemsEl.appendChild(row);
        });
      }

      function addToCart(product) {
        const existing = cart.get(product.id);
        if (existing) {
          existing.qty += 1;
          cart.set(product.id, existing);
        } else {
          cart.set(product.id, { product, qty: 1 });
        }
        showToast(`"${product.name}" ì´(ê°€) ì¥ë°”êµ¬ë‹ˆì— ë‹´ê²¼ì–´ìš”.`);
        updateSummary();
        renderCart();
      }

      function changeQty(product, delta) {
        const existing = cart.get(product.id);
        if (!existing) return;
        existing.qty += delta;
        if (existing.qty <= 0) {
          cart.delete(product.id);
        } else {
          cart.set(product.id, existing);
        }
        updateSummary();
        renderCart();
      }

      function updateSummary() {
        const { count, total } = Array.from(cart.values()).reduce(
          (acc, { product, qty }) => {
            acc.count += qty;
            acc.total += product.price * qty;
            return acc;
          },
          { count: 0, total: 0 }
        );

        summaryCountEl.textContent = count;
        summaryTotalEl.textContent = total.toLocaleString();
        const after = coin - total;
        summaryAfterEl.textContent = after.toLocaleString();
        btnPurchase.disabled = count === 0 || total > coin;

        if (total > coin) {
          summaryAfterEl.style.color = "var(--danger)";
        } else {
          summaryAfterEl.style.color = "inherit";
        }
      }

      function showToast(message) {
        toastMessageEl.textContent = message;
        toastEl.classList.add("show");
        clearTimeout(showToast._timer);
        showToast._timer = setTimeout(() => {
          toastEl.classList.remove("show");
        }, 1900);
      }

      // í•„í„° ë²„íŠ¼ í´ë¦­
      filterChips.forEach((chip) => {
        chip.addEventListener("click", () => {
          filterChips.forEach((c) => c.classList.remove("active"));
          chip.classList.add("active");
          currentFilter = chip.dataset.filter || "all";
          renderProducts();
        });
      });

      // êµ¬ë§¤ ë²„íŠ¼
      btnPurchase.addEventListener("click", () => {
        const { total, items } = Array.from(cart.values()).reduce(
          (acc, { product, qty }) => {
            acc.total += product.price * qty;
            acc.items.push(`${product.name} x${qty}`);
            return acc;
          },
          { total: 0, items: [] }
        );
        if (items.length === 0) return;
        if (total > coin) {
          showToast("ì½”ì¸ì´ ë¶€ì¡±í•´ìš”. ë¯¸ì…˜ìœ¼ë¡œ ì½”ì¸ì„ ë¨¼ì € ëª¨ì•„ì£¼ì„¸ìš”!");
          return;
        }
        coin -= total;
        cart.clear();

        coinBalanceEl.textContent = coin.toLocaleString();
        summaryCoinEl.textContent = coin.toLocaleString();
        showToast("êµ¬ë§¤ê°€ ì™„ë£Œë˜ì—ˆì–´ìš”! í”„ë¡œí•„ì—ì„œ ë°”ë¡œ ì ìš©í•  ìˆ˜ ìˆì–´ìš”.");
        updateSummary();
        renderCart();
      });

      // ì´ˆê¸° ìƒíƒœ
      function init() {
        coinBalanceEl.textContent = INITIAL_COIN.toLocaleString();
        summaryCoinEl.textContent = INITIAL_COIN.toLocaleString();
        summaryAfterEl.textContent = INITIAL_COIN.toLocaleString();
        updateFilterCounts();
        renderProducts();
        renderCart();
      }

      init();
    </script>
  </body>
</html>
